# PRD: Gen AI 슬라이드 자동 생성 기능

> **Product**: md-to-slide
> **Version**: 0.2.0
> **Date**: 2026-02-09
> **Status**: Draft

---

## 1. 개요

### 1.1 배경

md-to-slide는 마크다운 기반 프레젠테이션 도구로, 현재 v1.1.0까지 코어 기능(마크다운 편집, reveal.js 프리뷰, PDF/HTML 내보내기)과 UX 최적화(온보딩, 키보드 단축키, 반응형 레이아웃)가 완성된 상태이다.

그러나 현재 사용자가 직접 마크다운을 작성해야 하며, reveal.js 고급 문법(배경, 트랜지션, Fragment, 스피커 노트)을 모르면 활용이 제한적이다. Gen AI를 활용하여 자연어 입력만으로 전문적인 슬라이드를 생성할 수 있다면, 제품의 접근성과 활용도를 크게 높일 수 있다.

### 1.2 제품 비전

**"자연어 한 줄이면, 전문적인 프레젠테이션이 완성됩니다."**

사용자가 "AI 트렌드에 대한 5장짜리 발표자료 만들어줘"라고 입력하면, AI가 요구사항을 분석하고, 슬라이드 전략을 수립하고, 상세 아웃라인을 생성한 뒤, reveal.js 마크다운을 자동으로 작성한다.

### 1.3 목표

| 목표 | 지표 | 목표치 |
|------|------|--------|
| AI 생성 완성도 | 사용자 수정 없이 바로 사용 가능한 슬라이드 비율 | 70% 이상 |
| 생성 속도 | 5장 슬라이드 첫 토큰 ~ 완료 | TTFT < 1초, 전체 < 15초 |
| 비용 효율 | 1회 생성 비용 | $0.05 이하 |
| 내보내기 확장 | PPTX 호환성 | MS PowerPoint/Google Slides에서 정상 열림 |

---

## 2. 타겟 사용자

### 2.1 페르소나

| 페르소나 | 설명 | 니즈 | 빈도 |
|----------|------|------|------|
| **직장인 A** | 주 1회 팀 미팅 발표 | 빠르게 발표자료를 만들고 싶음, PPTX 필요 | 높음 |
| **대학생 B** | 수업/세미나 발표 | 마크다운은 모르지만 깔끔한 슬라이드를 원함 | 중간 |
| **개발자 C** | 기술 발표, 사내 공유 | 코드 하이라이팅 포함 슬라이드 자동 생성 | 중간 |
| **강사 D** | 교육 콘텐츠 제작 | 체계적이고 단계적인 교육 슬라이드 | 높음 |

### 2.2 핵심 사용 시나리오

**시나리오 1: 팀 미팅 발표** (직장인 A)
1. "이번 주 프로젝트 진행 현황 발표자료 5장 만들어줘" 입력
2. AI가 아웃라인 생성 → 사용자가 확인/수정
3. 슬라이드 자동 생성 → 실시간 프리뷰
4. 필요시 에디터에서 수동 수정
5. PPTX로 다운로드 → 팀 미팅에서 발표

**시나리오 2: 기술 발표** (개발자 C)
1. "Next.js App Router 마이그레이션 가이드 발표자료" 입력
2. 기술 발표 템플릿 선택
3. AI가 코드 예시 포함 슬라이드 생성
4. reveal.js 프리뷰로 발표 리허설
5. PDF로 공유

---

## 3. 핵심 기능

### 3.1 AI 슬라이드 생성 파이프라인

**2+2 하이브리드 아키텍처**: 논리적 4단계를 물리적 2번의 API 호출로 처리

| 단계 | 역할 | API 호출 | 출력 |
|------|------|----------|------|
| 1. Analyzer | 사용자 요구사항 분석 | Call 1 (통합) | JSON |
| 2. Strategist | 슬라이드 전략 수립 | Call 1 (통합) | JSON |
| 3. Outliner | 상세 아웃라인 생성 | Call 1 (통합) | JSON |
| 4. Generator | reveal.js 마크다운 생성 | Call 2 (스트리밍) | Markdown (SSE) |

- Call 1 ~ Call 2 사이에 **사용자 개입 지점**: 아웃라인 확인/수정/재생성
- Call 2는 SSE 스트리밍으로 실시간 생성 진행 표시

### 3.2 AI Wizard UI (4단계 위자드)

| Step | 화면 | 사용자 액션 |
|------|------|------------|
| Step 1 | 프롬프트 입력 + 옵션 설정 | 자연어 입력, 템플릿 선택, 슬라이드 수/테마/언어 설정 |
| Step 2 | 아웃라인 편집 | 확인, 순서 변경, 항목 추가/삭제, 인라인 편집 |
| Step 3 | 상세 계획 확인 | 읽기 전용 확인 (건너뛰기 가능) |
| Step 4 | 생성 진행 + 결과 | 진행률 확인, 완료 후 편집/내보내기 |

### 3.3 PPTX 내보내기

- reveal.js 렌더링 DOM을 pptxgenjs로 변환
- 배경색, 텍스트 스타일, 목록, 코드 블록, 발표자 노트 매핑
- 수직 슬라이드는 수평으로 평탄화
- MS PowerPoint / Google Slides 호환

### 3.4 reveal.js Markdown 플러그인 전환

- 현재: `marked` + `DOMPurify`로 직접 파싱
- 전환: reveal.js 네이티브 Markdown 플러그인으로 렌더링 위임
- 효과: 슬라이드 속성, Fragment, 발표자 노트 등 고급 문법 자동 지원

### 3.5 프롬프트 템플릿

| 카테고리 | 설명 | 예시 |
|----------|------|------|
| 비즈니스 | IR, 사업 계획, 실적 보고 | "2026년 1분기 실적 보고 발표자료" |
| 교육 | 수업, 세미나, 워크숍 | "Python 기초 3시간 강의자료" |
| 기술 | 아키텍처, 데모, 기술 소개 | "Next.js App Router 마이그레이션 가이드" |
| 제안서 | 프로젝트 제안, 투자 제안 | "사내 AI 도입 제안서" |

---

## 4. 기술 결정

| 결정 사항 | 선택 | 대안 | 선택 근거 |
|-----------|------|------|-----------|
| AI Provider | Anthropic Claude Sonnet 4.5 | OpenAI GPT-4o, Google Gemini | 마크다운 생성 품질, 스트리밍 안정성, 프롬프트 추종력 |
| 출력 포맷 | 마크다운 직접 출력 | JSON 구조화 | 스트리밍 자연스러움, reveal.js 즉시 렌더링 |
| 스트리밍 | SSE (Server-Sent Events) | WebSocket, Polling | Next.js API Route 호환, 단방향 충분 |
| PPTX | pptxgenjs | officegen | 13K stars, 브라우저/Node.js 지원, 풍부한 API |
| Markdown 파싱 | reveal.js Markdown 플러그인 | marked (현재) | 고급 문법 자동 지원 |
| API Key 관리 | 서버사이드 전용 | 클라이언트 | 보안 필수 |
| 상태 관리 | 별도 ai-wizard-store | 기존 slide-store 확장 | 관심사 분리, 복잡도 관리 |

---

## 5. 범위

### 5.1 포함 (In Scope)

- AI 슬라이드 생성 (프롬프트 → 아웃라인 → 마크다운)
- 4단계 AI Wizard UI
- SSE 스트리밍 실시간 생성
- 생성된 마크다운 에디터 편집
- reveal.js Markdown 플러그인 전환
- PPTX 내보내기
- 프롬프트 템플릿 (4종)
- 에러 복구 (자동 재시도, 부분 결과 보존)

### 5.2 제외 (Out of Scope)

- 이미지 생성 (DALL-E 등)
- 실시간 협업 편집
- 슬라이드 템플릿 마켓플레이스
- 사용자 인증/로그인
- 서버사이드 데이터 저장 (DB)
- 다중 AI Provider 지원 (초기에는 Anthropic만)

---

## 6. 비용 분석

| 시나리오 | 예상 토큰 | 비용 (Sonnet 4.5) | Prompt Caching 적용 |
|----------|----------|-------------------|---------------------|
| 5장 슬라이드 1회 | ~6,200 tok | ~$0.05 | ~$0.025 |
| 5장 + 아웃라인 수정 후 재생성 | ~8,200 tok | ~$0.07 | ~$0.035 |
| 10장 슬라이드 1회 | ~10,000 tok | ~$0.08 | ~$0.04 |

- Prompt Caching: 시스템 프롬프트(~2,000 토큰) 캐싱으로 반복 호출 비용 ~50% 절감
- Call 1 결과(아웃라인) 보존으로 Call 2만 재시도 시 비용 추가 절감

---

## 7. 리스크

| 리스크 | 영향 | 가능성 | 대응 |
|--------|------|--------|------|
| LLM 출력이 reveal.js 문법 미준수 | High | Medium | 시스템 프롬프트 최적화 + few-shot 예시 + 후처리 검증 |
| API 비용 과다 | Medium | Medium | Prompt Caching, 생성 횟수 제한(localStorage) |
| 스트리밍 중 연결 끊김 | Medium | Low | 재시도 로직 + 부분 결과 보존 |
| PPTX 변환 시 레이아웃 깨짐 | High | Medium | 단순 레이아웃 우선 + 매핑 테스트 강화 |
| reveal.js 플러그인 전환 회귀 | High | Low | 기존 동작 수동 QA |

---

## 8. 구현 로드맵

| Phase | 내용 | 산출물 |
|-------|------|--------|
| Phase 1 | reveal.js Markdown 플러그인 전환 | SlidePreview, separators, markdownParser 수정 |
| Phase 2 | AI 생성 백엔드 | API Route, 시스템 프롬프트, Anthropic SDK 연동 |
| Phase 3 | AI Wizard UI | 4단계 위자드, 스트리밍 훅, 스토어 |
| Phase 4 | PPTX 내보내기 | pptxgenjs 변환, ExportButtons 확장 |

---

## 9. 성공 기준

- [ ] 자연어 프롬프트로 reveal.js 슬라이드 생성 가능
- [ ] 아웃라인 수정 후 재생성 가능
- [ ] 스트리밍으로 실시간 생성 진행 확인 가능
- [ ] 생성된 마크다운을 에디터에서 수정 가능
- [ ] PPTX 내보내기 후 MS PowerPoint에서 정상 열림
- [ ] PDF 내보내기 정상 동작
- [ ] API Key가 클라이언트에 노출되지 않음
- [ ] TypeScript / ESLint 에러 0건, 빌드 성공

---

## Version History

| Version | Date | Changes |
|---------|------|---------|
| 0.1 | 2026-02-09 | Initial draft |
